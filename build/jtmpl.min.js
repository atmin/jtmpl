/*! jtmpl 02-05-2014 */
!function(a){"use strict";function b(){var a=[].slice.call(arguments);return["GET","POST"].indexOf(a[0])>-1?b.xhr(a):"string"==typeof a[0]&&"object"==typeof a[1]&&["object","undefined"].indexOf(typeof a[2])>-1?b.compile.apply(null,a):void 0}function c(a,b){return function(){return a(b.apply(this,[].slice.call(arguments)))}}function d(a,b){return a instanceof b?a:Object.create(b.prototype)}function e(a,b){var f=d(this,e);return f.setter=a,f.getter=b,f.map=function(d){return e(c(d,a),b)},f}function f(){this.objs=[],this.store=[]}function g(a,b){return RegExp(h(a.delimiters[0])+k+h(a.delimiters[1]),b)}function h(a){return(a+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}function i(a,c,d,e,f){var g,h,i=b.rules,j=b.rules.length;for(a=a.slice(f.delimiters[0].length,-f.delimiters[1].length),g=0;j>g;g++)if(h=i[g](a,c,d,e,f))return h}var j=/^[\w\.\-]+$/,k="[\\s\\S]*?";b.addChangeListener=function(){},f.prototype={get:function(a,b){var c=this.objs.indexOf(a);return c>-1?this.store[c]:(this.objs.push(a),this.store.push(b||{}),this.store[this.store.length-1])},release:function(a){var b=this.objs.indexOf(a);b>-1&&(this.objs.splice(b,1),this.store.splice(b,1))}};var l,e=new f;b.getsetFactory=l=function(a,b){function c(f,g,h){var i,j,k=e.get(a,d);if(k.dependents[f]||(k.dependents[f]=[]),void 0===g||"function"==typeof g)return-1===k.dependents[f].indexOf(b)&&k.dependents[f].push(b),"function"==typeof a[f]?a[f].call(c,g):a[f];for(h||("function"==typeof a[f]?a[f].call(c,g):a[f]=g),i=0,j=k.dependents[f].length;j>i;i++)c(k.dependents[f][i],void 0,!0);if(k.watchers[f])for(i=0,j=k.watchers[f].length;j>i;i++)k.watchers[f][i].call(c,g)}var d={dependents:{},watchers:{}};return c};var m=[["<table>","<jtmpl-table>"],["<table ","<jtmpl-table "],["</table>","</jtmpl-table>"],["<tr>","<jtmpl-tr>"],["<tr ","<jtmpl-tr "],["</tr>","</jtmpl-tr>"],["<td>","<jtmpl-td>"],["<td ","<jtmpl-td "],["</td>","</jtmpl-td>"]];b.compile=function(a,c,d){var e,f,j,k,l,n,o,p,q,r,s=document.createDocumentFragment();for(a instanceof Node?k=a:(m.map(function(b){a=a.replace(new RegExp(h(b[0]),"g"),b[1])}),k=document.createElement("body"),k.innerHTML=a),e=0;e<k.childNodes.length;e++)switch(l=k.childNodes[e],n=l.cloneNode(!1),s.appendChild(n),n.nodeType){case 1:for(f=0,j=n.attributes.length;j>f;f++)console.log(attr.name+"="+attr.value);n.appendChild(b.compile(l,c,d));break;case 3:for(o=g(d);p=n.data.match(o);)r=n.splitText(p.index),n=r.splitText(p[0].length),q=i(r.data,r,null,c,d),q&&(r.data=q.replace||"")}return s},b.rules=[function(a,b,c,d){var e=a.match(j);return e?{replace:d[a]}:void 0}],"undefined"==typeof module?a.jtmpl=b:exports=module.exports=b}(this);