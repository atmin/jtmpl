/*! jtmpl 07-12-2013 */
!function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v;q=("undefined"!=typeof exports&&null!==exports?exports:this).jtmpl=function(b,c,g,i){var j,k,l,m;if((null===b||"string"==typeof b)&&null==c){if("undefined"==typeof document||null===document)throw new Error(":( this API is only available in a browser");return h.slice.call(document.querySelectorAll(b))}if("string"!=typeof b||"number"!=(m=typeof c)&&"string"!==m&&"boolean"!==m&&"object"!==m||void 0!==g&&null!==g||(g=c,c=b,b=void 0),"string"==typeof b&&b.match(e)&&(b=document.getElementById(b.substring(1))),null==g)throw new Error(":( no model");return c.match&&c.match(e)&&(c=document.getElementById(c.substring(1)).innerHTML),i=i||{},i.delimiters=(i.delimiters||"{{ }}").split(" "),i.compiledDelimiters=(i.compiledDelimiters||"#{ }#").split(" "),i.defaultSection=i.defaultSectionTag||"div",i.defaultSectionItem=i.defaultSectionItem||"div",i.defaultVar=i.defaultVar||"span",i.defaultTargetTag=i.defaultTargetTag||"div",j=i.delimiters,c=(""+c).replace(u("{{{ ("+d+") }}}"),j[0]+"&$1"+j[1]).replace(u("<!-- "+f+" ({{ "+a+" }}) "+f+" -->",j),"$1").replace(u("("+d+")='({{ "+d+" }})'",j),"$1=$2").replace(u("("+d+')="({{ '+d+' }})"',j),"$1=$2").replace(u("\\n "+f+" ({{ "+a+" }}) "+f+" \\n",j),"\n$1\n"),k=q.compile(c,g,null,!1,i).trim(),b?("SCRIPT"===b.nodeName&&(l=document.createElement(i.defaultTargetTag),b.parentNode.replaceChild(l,b),b=l),b.innerHTML=k,i.rootModel=g,q.bind(b,g,i)):k},d="[\\w\\.\\-]+",e="^#[\\w\\.\\-]+$",a="[\\s\\S]*?",f="\\s*",c='(?: ( \\s* data-jt = " [^"]* )" )?',b=/^(#|\^)\s([\s\S]*)$/,q.preprocessingRules=[{pattern:"",replaceWith:""}],q.compileRules=[{pattern:'(class="? [\\w \\. \\- \\s {{}}]*) {{ ('+d+") }}$",replaceWith:function(a,b,c){var d;return d=c[b],[(-1===a.search("{")&&a||" ")+("boolean"==typeof d&&d&&b||""),[]]},echoReplaceWith:function(a,b){return a.search("{")>-1?" {{"+b+"}}":null},bindingToken:function(a,b){return"class="+b}},{pattern:"on("+d+") = {{ ("+d+") }}$",replaceWith:function(){return["",[]]},bindingToken:function(a,b){return"on"+a+"="+b}},{pattern:"("+d+") = {{ ("+d+") }}$",replaceWith:function(a,b,c){var d;return d=c[b],null==d||null===d?["",[]]:"boolean"==typeof d?[d?a:"",[]]:[""+a+'="'+d+'"',[]]},bindingToken:function(a,b){return""+a+"="+b}},{pattern:"{{ \\^ ("+d+") }}$",wrapper:"defaultSection",lastTag:function(a,b){return Array.isArray(a[b])?b:null},contents:function(a,b,c,d){var e;return e=b[c],Array.isArray(e)?[e.length?"":q(a,b),[["data-jt-0",s(a.trim(),d.delimiters,d.compiledDelimiters)]]]:[q(a,b),e?[["style","display:none"]]:[]]},bindingToken:function(a){return"^"+a}},{pattern:"{{ \\# ("+d+") }}$",lastTag:function(a,b){return Array.isArray(a[b])?b:null},wrapper:"defaultSection",contents:function(a,b,c,d){var e,f;return f=b[c],Array.isArray(f)?[function(){var b,c,d;for(d=[],b=0,c=f.length;c>b;b++)e=f[b],d.push(q(a,e,null,{asArrayItem:!0}));return d}().join(""),[["data-jt-1",s(a.trim(),d.delimiters,d.compiledDelimiters)]]]:"object"==typeof f?[q(a,f),[]]:[q(a,b),f?[]:[["style","display:none"]]]},bindingToken:function(a){return"#"+a}},{pattern:"{{ & ("+d+") }}$",wrapper:"defaultVar",replaceWith:function(a,b){return["."===a&&b||b[a],[]]},bindingToken:function(a){return a}},{pattern:"{{ ("+d+") }}$",wrapper:"defaultVar",replaceWith:function(a,b){return[k("."===a&&b||b[a]),[]]},bindingToken:function(a){return a}}],q.bindRules=[{pattern:"(value | checked | selected) = ("+d+")",bindTo:function(a,b){return b},react:function(a,b,c,d){return"OPTION"===a.nodeName&&a.parentNode.querySelector("option")===a&&a.parentNode.addEventListener("change",function(){var b,e,f,g,h,i;for(b=0,h=a.parentNode.children,i=[],f=0,g=h.length;g>f;f++)e=h[f],"OPTION"===e.nodeName?(d[c]=e.selected,i.push(b++)):i.push(void 0);return i}),"radio"===a.type&&a.name&&a.addEventListener("change",function(){var e,f,g,h;if(a[b])for(h=document.querySelectorAll("input[type=radio][name="+a.name+"]"),f=0,g=h.length;g>f;f++)e=h[f],e!==a&&e.dispatchEvent(new Event("change"));return d[c]=a[b]}),"text"===a.type?a.addEventListener("input",function(){return d[c]=a[b]}):a.addEventListener("change",function(){return d[c]=a[b]}),function(c){return a[b]!==c?a[b]=c:void 0}}},{pattern:"on("+d+") = ("+d+")",react:function(a,b,c,d,e){var f,g;if(f=(null!=e?null!=(g=e.rootModel)?g[c]:void 0:void 0)||d[c],"function"!=typeof f)throw":( "+c+" is not a function, cannot attach event handler";return a.addEventListener(b,f.bind(d)),null}},{pattern:"class = ("+d+")",bindTo:function(a){return a},react:function(a,b){return function(c){return(c&&g||v)(a,b)}}},{pattern:"("+d+") = "+d,bindTo:function(a,b){return b},react:function(a,b){return function(c){return a[b]!==c?a[b]=c:void 0}}},{pattern:"(# | \\^) ("+d+")",bindTo:function(a,b){return b},recurseContext:function(a,b,c){var d;return d=c[b],Array.isArray(d)?(console.log("no recurseContext"),null):"object"==typeof d?(console.log("recurseContext: "+b),d):(console.log("recurseContext: model"),c)},react:function(a,b,c,d,e){var f,g,h,i,j,k;if(h=d[c],console.log("react sectionType="+b+" attr="+c+" val="+h),Array.isArray(h)&&"#"===b)for(console.log("binding collection items"),k=a.children,g=i=0,j=k.length;j>i;g=++i)f=k[g],q.bind(f,h[g],e);return function(c){var f,g,h,i;if(Array.isArray(c)){for(q.bindArrayToNodeChildren(c,a),a.innerHTML=c.length?"":q(s(a.getAttribute("data-jt-0")||"",e.compiledDelimiters,e.delimiters),{}),i=[],g=0,h=c.length;h>g;g++)f=c[g],i.push(a.appendChild(q.createSectionItem(a,f)));return i}return"object"==typeof c?(a.innerHTML=q(s(a.getAttribute("data-jt-1")||"",e.compiledDelimiters,e.delimiters),c),q(a,a.innerHTML,c,{rootModel:d})):a.style.display=!c!=("^"===b)&&"none"||""}}},{pattern:"("+d+")",bindTo:function(a){return a},react:function(a){return function(b){return a.innerHTML=b}}}],q.compile=function(b,c,d,e,f){var g,h,i,j,k,l,m,s,t,v,w,x,y,z,A,B,C,D,E,F,G,H,I;for(C=u("{{ (/?) ("+a+") }}",f.delimiters),v="",s=0;B=C.exec(b);){if(B[1]){if(B[2]!==d)throw new Error(d&&":( expected {{/"+d+"}}, got {{"+B[2]+"}}"||":( unexpected {{/"+B[2]+"}}");return v+b.slice(s,C.lastIndex-B[0].length)}for(y=b.slice(Math.max(0,s-128),C.lastIndex),G=q.compileRules,E=0,F=G.length;F>E;E++)if(w=G[E],m=u(w.pattern,f.delimiters).exec(y)){v+=b.slice(s,C.lastIndex-m[0].length),j=r(v),g=w.bindingToken.apply(w,m.slice(1)),null!=w.replaceWith?(e?v+=("function"==typeof w.echoReplaceWith?w.echoReplaceWith.apply(w,m.slice(1)):void 0)||m[0]:(H=w.replaceWith.apply(w,m.slice(1).concat([c])),t=H[0],D=H[1],-1===j&&null!=w.wrapper?(z=f[w.wrapper],v+=n(o("<"+z+">"+t+"</"+z+">",g),D)):(v+=t,v=v.slice(0,j)+n(o(v.slice(j),g),D))),s=C.lastIndex):(A=q.compile(b.slice(C.lastIndex),c,m[1],!0,f),C.lastIndex+=A.length,h=C.exec(b),s=C.lastIndex,e?v+=B[0]+A+h[0]:(x=m[1],I=w.contents(A,c,x,f),i=I[0],D=I[1],-1===j?(z=f[w.wrapper],x!==l?(k=v.length,v+=n(o("<"+z+">"+i+"</"+z+">",g),D)):v=v.slice(0,k)+n(o(v.slice(k),g),D,i.trim())):(v=v.slice(0,j)+n(o(v.slice(j),g),D)+i.trim(),k=j),l=("function"==typeof w.lastTag?w.lastTag(c,x):void 0)||null));break}}return v+=b.slice(s),f.asArrayItem?p(v)?v:(z=f.defaultSectionItem,"<"+z+">"+v+"</"+z+">"):v},o=function(b,e){var g,h,i;return h=u("^ ("+f+" < "+d+") ("+a+") "+c).exec(b),g=(h[3]||"").length,i=h[1].length+h[2].length+g,b.slice(0,i)+(g?('data-jt="'===h[3].trim()?"":" ")+e:' data-jt="'+e+'"')+b.slice(i)},n=function(b,c,e){var g,h,i;return c.length?(g=u("^ ("+f+" < "+d+" "+a+")>").exec(b),i=g[1].length,b.slice(0,i)+[function(){var a,b,d;for(d=[],a=0,b=c.length;b>a;a++)h=c[a],d.push(" "+h[0]+'="'+h[1].replace(/"/g,"&quot;").replace(/>/g,"&gt;").replace(/</g,"&lt;")+'"');return d}()].join("")+">"+(e||"")+b.slice(i+1)):b},r=function(a){return a.trimRight().search(u("< "+d+" [^>]*? >?$"))},p=function(b){return!!b.trim().match(u("^<("+d+") "+f+"        [^>]*? > "+a+" </\\1>$ | < [^>]*? />$"))},q.bind=function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o;for(n=a.children,o=[],l=0,m=n.length;m>l;l++)g=n[l],(d=g.getAttribute("data-jt"))?o.push(function(){var a,l,m,n;for(m=d.trim().split(" "),n=[],a=0,l=m.length;l>a;a++)e=m[a],n.push(function(){var a,d,l,m;for(l=q.bindRules,m=[],a=0,d=l.length;d>a;a++){if(k=l[a],f=u(k.pattern).exec(e)){console.log(f[0]),i=k.react.apply(k,[g].concat(f.slice(1),[b,c])),h="function"==typeof k.bindTo?k.bindTo.apply(k,f.slice(1)):void 0,t(b,h,i),j="function"==typeof k.recurseContext?k.recurseContext.apply(k,f.slice(1).concat([b])):void 0,null!==j&&(console.log("recurse"),q.bind(g,j||b,c));break}m.push(void 0)}return m}());return n}()):(console.log("recurse"),o.push(q.bind(g,b,c)));return o},h=Array.prototype,l=function(a){return(a+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},u=function(a,b){return a=a.replace(/\s+/g,""),new RegExp(b?a.replace("{{",l(b[0])).replace("}}",l(b[1])):a,"g")},k=function(a){return(null!=a&&a||"").toString().replace(/[&"<>\\]/g,function(a){return{"&":"&amp;","\\":"\\\\",'"':'"',"<":"&lt;",">":"&gt;"}[a]})},s=function(a,b,c){var d,e,f,g;for(e=f=0,g=b.length;g>f;e=++f)d=b[e],a=a.replace(u(l(d)),c[e]);return a},q.createSectionItem=j=function(a,b){var c;return c=document.createElement("body"),c.innerHTML=q(s(node.getAttribute("data-jt-1")||"",options.compiledDelimiters,options.delimiters),b),c=c.children[0],q(c,c.innerHTML,b,{rootModel:model}),c},q.hasClass=m=function(a,b){return new RegExp("(\\s|^)"+b+"(\\s|$)").test(a.className)},q.addClass=g=function(a,b){return m(a,b)?void 0:a.className+=(a.className&&" "||"")+b},q.removeClass=v=function(a,b){return m(a,b)?a.className=a.className.replace(new RegExp("(\\s|^)"+b+"(\\s|$)"),"").replace(/^\s+|\s+$/g,""):void 0},t=function(a,b,c){var d;if(a&&b&&c)return d=Object.getOwnPropertyDescriptor(a,b)||Object.getOwnPropertyDescriptor(a.constructor.prototype,b),Object.defineProperty(a,b,{get:d.get||function(){return d.value},set:function(a){return("function"==typeof d.set?d.set(a):void 0)||(d.value=a),c(a)},configurable:!0})},q.bindArrayToNodeChildren=i=function(a,b){var c,d,e,f,g;if(!a.__garbageCollectNodes)for(a.__garbageCollectNodes=function(){var a,b;for(a=this.__nodes.length,b=[];--a;)this.__nodes[a].parentNode?b.push(void 0):b.push(this.__nodes.splice(a,1));return b},a.__removeEmpty=function(){return this.length?void 0:b.innerHTML=""},a.__addEmpty=function(){return this.length?void 0:b.innerHTML=q(s(b.getAttribute("data-jt-0")||"",options.compiledDelimiters,options.delimiters),{})},a.pop=function(){var a,c,d;for(this.__removeEmpty(),this.__garbageCollectNodes(),d=this.__nodes,a=0,c=d.length;c>a;a++)b=d[a],b.removeChild(b.children[b.children.length-1]);return h.pop.apply(this,arguments),h.pop.apply(this.__values,arguments),this.__addEmpty()},a.push=function(a){var d,e,f,g,i;for(this.__removeEmpty(),this.__garbageCollectNodes(),i=this.__nodes,f=0,g=i.length;g>f;f++)b=i[f],b.appendChild(j(b,a));return h.push.apply(this,arguments),d=this.__values.length,e=h.push.apply(this.__values,arguments),c(a,d),e},a.reverse=function(){var a,d,e,f,g,i,k,l,m;for(this.__removeEmpty(),this.__garbageCollectNodes(),e=h.reverse.apply(this.__values,arguments),l=this.__nodes,f=0,i=l.length;i>f;f++)for(b=l[f],b.innerHTML="",m=this.__values,a=g=0,k=m.length;k>g;a=++g)d=m[a],b.appendChild(j(b,d)),c(d,a);return this.__addEmpty(),e},a.shift=function(){var a,d,e,f,g,i,j,k,l;for(this.__removeEmpty(),this.__garbageCollectNodes(),h.shift.apply(this,arguments),e=h.shift.apply(this.__values,arguments),k=this.__nodes,f=0,i=k.length;i>f;f++)b=k[f],b.removeChild(b.children[0]);for(l=this.__values,a=g=0,j=l.length;j>g;a=++g)d=l[a],c(d,a);return this.__addEmpty(),e},a.unshift=function(){var a,d,e,f,g,i,k,l,m,n,o,p;for(this.__removeEmpty(),this.__garbageCollectNodes(),n=h.slice.call(arguments).reverse(),f=0,k=n.length;k>f;f++)for(d=n[f],o=this.__nodes,g=0,l=o.length;l>g;g++)b=o[g],b.insertBefore(j(b,d),b.children[0]);for(h.unshift.apply(this,arguments),e=h.unshift.apply(this.__values,arguments),p=this.__values,a=i=0,m=p.length;m>i;a=++i)d=p[a],c(d,a);return this.__addEmpty(),e},a.sort=function(){var d,e,f,g,i,k,l,m,n,o,p;for(this.__removeEmpty(),this.__garbageCollectNodes(),h.sort.apply(this,arguments),f=h.sort.apply(this.__values,arguments),o=this.__nodes,g=0,l=o.length;l>g;g++)for(b=o[g],b.innerHTML="",d=i=0,m=a.length;m>i;d=++i){for(e=a[d],p=this.__nodes,k=0,n=p.length;n>k;k++)b=p[k],b.appendChild(j(b,e));c(e,d)}return this.__addEmpty(),f},a.splice=function(a,d){var e,f,g,i,k,l,m,n,o;for(this.__removeEmpty(),this.__garbageCollectNodes(),n=this.__nodes,g=0,l=n.length;l>g;g++){for(b=n[g],e=i=0;d>=0?d>i:i>d;e=d>=0?++i:--i)b.removeChild(b.children[a]);for(o=h.slice.call(arguments,2),k=0,m=o.length;m>k;k++)f=o[k],b.insertBefore(j(b,f),b.children[a]),c(f,a)}return h.splice.apply(this,arguments),h.splice.apply(this.__values,arguments),this.__addEmpty()},c=function(c,d){return a.__values[d]=c,Object.defineProperty(a,d,{get:function(){return this.__values[d]},set:function(a){var c,e,f,g;for(this.__garbageCollectNodes(),this.__values[d]=a,f=this.__nodes,g=[],c=0,e=f.length;e>c;c++)b=f[c],g.push(b.replaceChild(j(b,a),b.children[d]));return g}})},Object.defineProperty(a,"__nodes",{enumerable:!1,writable:!0,value:[]}),Object.defineProperty(a,"__values",{enumerable:!1,writable:!0,value:[]}),d=f=0,g=a.length;g>f;d=++f)e=a[d],c(e,d);return-1===a.__nodes.indexOf(b)&&a.__nodes.push(b),a}}.call(this);