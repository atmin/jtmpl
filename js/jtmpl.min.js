/*! jtmpl 16-09-2013 */
!function(){var a;a=this,a.jtmpl=function(a,b,c,d){var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w;if(s=/^\#[\w-]+$/,(null===a||"string"==typeof a)&&null==b){if("undefined"==typeof document||null===document)throw":( this API is only available in a browser";return Array.prototype.slice.call(document.querySelectorAll(a))}if("string"!=typeof a||"number"!=(w=typeof b)&&"string"!==w&&"boolean"!==w&&"object"!==w||void 0!==c||(d=c,c=b,b=a,a=void 0),"string"==typeof a&&a.match(s)&&(a=document.getElementById(a.substring(1))),null==c)throw":( no model";return b.match&&b.match(s)&&(b=document.getElementById(b.substring(1)).innerHTML),q=function(a){return(a+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},d=d||{},d.delimiters=(d.delimiters||"{{ }}").split(" "),d.compiledDelimiters=(d.compiledDelimiters||"<<< >>>").split(" "),d.defaultSection=d.defaultSectionTag||"div",d.defaultSectionItem=d.defaultSectionItem||"div",d.defaultVar=d.defaultVar||"span",d.defaultTargetTag=d.defaultTargetTag||"div",u=/(\{)?(\#|\^|\/)?([\w\.\-_]+)(\})?/,r=new RegExp(q(d.delimiters[0])+u.source+q(d.delimiters[1]),"g"),l=/(<\s*[\w-_]+)(?:\s+([\w-\{\}]*)(=)?(?:((?:"[^">]*"?)|(?:'[^'>]*'?)|[^\s>]+))?)*?\s*(>)?\s*(?:<!--.*?-->\s*)*$/,n=/^(\s*<([\w-_]+))(?:(\s*data-jt="[^"]*)")?[^>]*>[\s\S]*?<\/\2>\s*$/,h=function(a){var b,c;if(null===a||"object"!=typeof a)return a;c=a.constructor();for(b in a)c[b]=h(a[b]);return c},j=function(a){return(null!=a&&a||"").toString().replace(/[&\"<>\\]/g,function(a){switch(a){case"&":return"&amp;";case"\\":return"\\\\";case'"':return'"';case"<":return"&lt;";case">":return"&gt;";default:return a}})},p=function(a){return[function(){switch(a[2]){case"/":return"end";case"#":return"section";case"^":return"inverted_section";case void 0:return"{"===a[1]?"unescaped_var":"var";default:throw":( internal error, tag "+a[0]}}(),a[3],a[0],(a[2]||"")+a[3]]},f=function(a,b,c){return b.addEventListener?b.addEventListener(a,c,!1):b.attachEvent?b.attachEvent("on"+a,c):b[a]=c},v=function(a,b){var c;return"undefined"!=typeof Event&&null!==Event?b.dispatchEvent(new Event(a)):document.createEvent?(c=document.createEvent("Event"),c.initEvent(a,!0,!0),b.dispatchEvent(c)):(c=document.createEventObject(),b.fireEvent("on"+a,c))},k=function(a,b){return new RegExp("(\\s|^)"+b+"(\\s|$)").test(a.className)},e=function(a,b){return k(a,b)?void 0:a.className+=(a.className&&" "||"")+b},t=function(a,b){return k(a,b)?a.className=a.className.replace(new RegExp("(\\s|^)"+b+"(\\s|$)"),"").replace(/^\s+|\s+$/g,""):void 0},i=function(a,b,c,e){var f,g,h,k,m,o,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J;for(B=c||0,z=A="",D=u=y=null,a=a.replace(new RegExp("<!--\\s*("+r.source+")\\s*-->"),"$1"),a=a.replace(new RegExp('([\\w-_]+)="('+r.source+')"',"g"),"$1=$2"),a=a.replace(new RegExp("\\n\\s*("+r.source+")\\s*\\n","g"),"\n$1\n"),m=function(){return z+=a.slice(B,r.lastIndex-(o||"").length),B=r.lastIndex},t=function(a,b){return b=b||"",u[3]&&!u[5]&&u[2]+u[3]+b+a+b||a},h=function(){return i(a,b,B,E)},w=function(){var a,b,c;return b=u.index+u[1].length+(A!==z&&z.length-A.length||0),c=""+t(s),(a=z.match(new RegExp("[\\s\\S]{"+b+'}(\\sdata-jt="([^"]*))"')))?(b+=a[1].length,z=""+z.slice(0,b)+(a[2].length&&" "||"")+c+z.slice(b)):z=""+z.slice(0,b)+' data-jt="'+c+'"'+z.slice(b),""},f=function(a){var b,c;return a=a.trim(),b=a.match(n),z+=b?(c=b[1].length+(b[3]&&b[3].length||0),""+a.slice(0,c)+(!b[3]&&' data-jt="."'||" .")+a.slice(c)):"<"+d.defaultSectionItem+' data-jt=".">'+a+"</"+d.defaultSectionItem+">"};D=r.exec(a);)switch(J=p(D),F=J[0],E=J[1],o=J[2],s=J[3],m(),A=z.length>300&&z.slice(-300)||z,u=A.match(l),F){case"end":if(E!==e)throw e?":( expected {{/"+e+"}}, got "+o:":( unexpected {{/"+E+"}}";return z;case"var":case"unescaped_var":if(G="."===E?b:b[E],k="unescaped_var"===F&&G||j(G),u)if(w(),"function"==typeof G)z=z.replace(/[\w-_]+=$/,"");else if("class"===u[2]){if("boolean"!=typeof G)throw""+E+" is not boolean";G&&(z+=E)}else u[3]&&!u[5]?null==G||null===G?z=z.replace(/[\w-_]+=$/,""):"boolean"==typeof G?z=z.replace(/[\w-_]+=$/,"")+(G&&u[2]||""):z+='"'+G+'"':z+=G;else z+="<"+d.defaultVar+' data-jt="'+s+'">'+k+"</"+d.defaultVar+">";break;case"section":case"inverted_section":if(u?w():E!==y&&(z+="<"+d.defaultSection+' data-jt="'+s+'">'),G=b[E],C=a.slice(B).match(new RegExp("([\\s\\S]*?)"+q(d.delimiters[0]+"/"+E+d.delimiters[1]))),!C)throw":( unclosed section "+o;if(C=C[1].trim().replace(new RegExp(q(d.delimiters[0]),"g"),d.compiledDelimiters[0]).replace(new RegExp(q(d.delimiters[1]),"g"),d.compiledDelimiters[1]),z+="<!-- "+D[2]+" "+C+" -->","section"===F)if(!G||Array.isArray(G)&&!G.length)h(),B=r.lastIndex;else{for(g=Array.isArray(G)&&G||[G],v=H=0,I=g.length;I>H;v=++H)x=g[v],m(),f(i(a,G&&"object"==typeof G?x:b,B,E)),v<g.length-1&&(r.lastIndex=B);B=r.lastIndex}else{if("inverted_section"!==F)throw":( internal error";!G||Array.isArray(G)&&!G.length?(z+=i(a,b,B,E),B=r.lastIndex):(h(b),B=r.lastIndex)}u||E===y||(z+="</"+d.defaultSection+">"),y=E}return z+=a.slice(B),z=z.replace(/data-jt="\.(\s\.)+"/g,'data-jt="."')},m=i(b,c),null==a?m:("SCRIPT"===a.nodeName&&(o=document.createElement(d.defaultTargetTag),a.parentNode.replaceChild(o,a),a=o),a.innerHTML=m,a.setAttribute("data-jt","."),g=function(a,b,h){var i,j,k,l,m,n,o,p,r,s,u,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P;for(r=function(a,b){return null==a._jt_bind&&(a._jt_bind={}),null==a._jt_bind[b]&&(a._jt_bind[b]=[]),a._jt_bind[b]},k=function(a){var b,c,d,e;null!=a._jt_bind&&(a._jt_bind["."]&&a._jt_bind["."].length?Object.observe(a,a._jt_bind["."][0]):(c=o(a._jt_bind),Object.observe(a,c)),delete a._jt_bind),e=[];for(b in a)d=a[b],"object"==typeof d?e.push(k(d)):e.push(void 0);return e},o=function(a){return function(b){var c,d,e,f,g;for(g=[],e=0,f=b.length;f>e;e++)d=b[e],"updated"===d.type&&null!=a[d.name]?g.push(function(){var b,e,f,g;for(f=a[d.name],g=[],b=0,e=f.length;e>b;b++)c=f[b],g.push(c(d));return g}()):g.push(void 0);return g}},s=function(a){return this.innerHTML=a.object[a.name]},n=function(a){return(a.object[a.name]&&e||t)(this,a.name)},j=function(a){return function(b){var c;return c=b.object[b.name],"value"===a||"checked"===a||"selected"===a?this[a]=c:"boolean"==typeof c&&!c||null===c?this.removeAttribute(a):this.setAttribute(a,c)}},F=function(a){return function(b){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v;if(!Array.isArray(a))return n=b.object[b.name],jtmpl(this,this.getAttribute("data-jt-"+(n&&1||0))||"",b.object),a=n;for(n=b[0].object,k=[],a.length||(this.innerHTML=""),b=function(){var a,c,e;for(e=[],a=0,c=b.length;c>a;a++)d=b[a],""+parseInt(d.name)===d.name&&e.push(d);return e}(),o=0,s=b.length;s>o;o++)d=b[o],console.log(""+d.name+" was "+d.type+" and is now "+d.object[d.name]);for(i=function(){var a,c,e;for(e=[],a=0,c=b.length;c>a;a++)d=b[a],"new"===d.type&&e.push(d.name);return e}(),f=function(){var a,c,e;for(e=[],a=0,c=b.length;c>a;a++)d=b[a],"deleted"===d.type&&e.push(d.name);return e}(),f.reverse(),m=function(){var a,c,e;for(e=[],a=0,c=b.length;c>a;a++)d=b[a],"updated"===d.type&&e.push(d.name);return e}(),l=this,p=0,t=i.length;t>p;p++)h=i[p],g=document.createElement("div"),g.innerHTML=jtmpl(this.getAttribute("data-jt-1"),n[h]),g=g.children[0],jtmpl(g,g.innerHTML,n[h],{rootModel:c}),this.appendChild(g);for(q=0,u=f.length;u>q;q++)h=f[q],k.push(function(a,b){return function(){return g=b.children[a],b.removeChild(g)}}(h,this));for(r=0,v=m.length;v>r;r++)h=m[r],e=n[h],k.push(function(a){return function(){return l.removeChild(l.children[a])}}(h)),k.push(function(a){return function(){return g=document.createElement("div"),g.innerHTML=jtmpl(l.getAttribute("data-jt-1"),n[a]),g=g.children[0],jtmpl(g,g.innerHTML,n[a],{rootModel:c}),a>=l.children.length?l.appendChild(g):l.insertBefore(g,l.children[a])}}(h));return n.length||k.push(function(){return l.innerHTML=jtmpl(l.getAttribute("data-jt-0")||"",{})}),a=n.slice()||a,j=function(){return k.shift()(),k.length?setTimeout(j,1e3):void 0},k.length?setTimeout(j,1e3):void 0}},m=function(a,b,c){return function(){return a[c]=this[b]}},D=function(a,b,c){return function(){var d,e,f,g;if(this[b])for(g=jtmpl("input[type=radio][name="+this.name+"]"),e=0,f=g.length;f>e;e++)d=g[e],d!==this&&v("change",d);return a[c]=this[b]}},B=function(a,b,c){var d;return d=!1,function(){var b,e,f,g,h;if(!d){for(d=!0,b=0,h=this.children,f=0,g=h.length;g>f;f++)e=h[f],"OPTION"===e.nodeName&&(a[b][c]=e.selected,b++);return d=!1}}},u=0,A=null,l={},h=h||0,N=a.childNodes,J=0,L=N.length;L>J;J++)switch(z=N[J],z.nodeType){case z.ELEMENT_NODE:if(i=z.getAttribute("data-jt"))for(x=i.trim().split(" ").sort(),K=0,M=x.length;M>K;K++)if(w=x[K],"#"===(O=w.slice(0,1))||"^"===O)I=w.slice(1),A=b[I],Array.isArray(A)&&r(A,".").push(F(A).bind(z)),r(b,I).push(F(A).bind(z));else if("."===w)A=b[u++]||b,"object"!=typeof A&&(A=null);else if(P=w.match(/(?:\/|#)?([\w-.]+)(?:\=([\w-.]+))?/),G=P[0],y=P[1],H=P[2],C=r("object"==typeof A&&!Array.isArray(A)&&A||b,H||y),y&&0===y.indexOf("on")){if(p=null!=d.rootModel&&d.rootModel[H]||c[H],"function"!=typeof p)throw":( "+H+" is not a function, cannot attach event handler";f(y.slice(2),z,p.bind(b))}else H?"class"===y?C.push(n.bind(z)):(C.push(j(y).bind(z)),("value"===y||"checked"===y||"selected"===y)&&("OPTION"===z.nodeName&&z.parentNode.querySelectorAll("option")[0]===z&&f("change",z.parentNode,B(b,y,H).bind(z.parentNode)),"radio"===z.type&&z.name?f("change",z,D(b,y,H).bind(z)):f("change",z,m(b,y,H).bind(z)))):C.push(s.bind(z));g(z,A||b,h+1);break;case z.TEXT_NODE:break;case z.COMMENT_NODE:(E=z.nodeValue.trim().match(/^(#|\^)\s([\s\S]*)$/))&&(E[2]=E[2].replace(new RegExp(q(d.compiledDelimiters[0]),"g"),d.delimiters[0]).replace(new RegExp(q(d.compiledDelimiters[1]),"g"),d.delimiters[1]),"#"===E[1]?a.setAttribute("data-jt-1",E[2]):a.setAttribute("data-jt-0",E[2]));break;default:throw":( unexpected nodeType "+z.nodeType}return h?void 0:k(b)},g(a,c))}}.call(this),Object.observe||function(a,b){var c=function(a){var c=a.call(a),d=typeof d;return"object"==typeof b.alert?function(b){return c===a.call(b)||!!b&&typeof b.toString==d&&typeof b.valueOf==d&&/^\s*\bfunction\b/.test(""+b)}:function(b){return c===a.call(b)}}(a.prototype.toString),d=function(a){return!isNaN(parseFloat(a))&&isFinite(a)},e=function(a,b){return a===b?0!==a||1/a===1/b:a!==a&&b!==b},f=function(a){return"undefined"==typeof a?!1:"get"in a||"set"in a},g=function(a,b){if("object"!=typeof a)throw new TypeError("Object.observeObject called on non-object");if(c(b)===!1)throw new TypeError("Object.observeObject: Expecting function");if(Object.isFrozen(b)===!0)throw new TypeError("Object.observeObject: Expecting unfrozen function")},h=function(){var a=[],b=function(b,c){g(b,c),Object.getNotifier(b).addListener(c),-1===a.indexOf(b)?a.push(b):Object.getNotifier(b)._checkPropertyListing()};b.prototype.deliverChangeRecords=function(a){Object.getNotifier(a).deliverChangeRecords()},a.lastScanned=0;var c=function(a){return function(){var b=0,d=a.length,e=new Date,f=!1;for(b=a.lastScanned;d>b&&!f;b++)Object.getNotifier(a[b])._checkPropertyListing(),f=new Date-e>100;a.lastScanned=d>b?b:0,setTimeout(c,100)}}(a);return setTimeout(c,100),b}(),i=function(a){var b=[],c=[],g=!1,h=[],i=[],j=this;Object.defineProperty(j,"_watching",{get:function(a){return function(){return a}}(a)});var k=function(a,b){var c=(typeof a[b],Object.getOwnPropertyDescriptor(a,b));if("getNotifier"===b||f(c)||!c.enumerable)return!1;if(a instanceof Array&&d(b)){var g=h.length;return h[g]=b,i[g]=a[b],!0}return function(b,c){h[b]=c,i[b]=a[c],Object.defineProperty(a,c,{get:function(){return i[b]},set:function(d){e(i[b],d)||(Object.getNotifier(a).queueUpdate(a,c,"updated",i[b]),i[b]=d)}})}(h.length,b),!0};j._checkPropertyListing=function(a){var b,c,e,f,g=j._watching,l=Object.keys(g),m=0,n=l.length,o=h.slice(0),p=!a;for(m=0;n>m;m++)b=l[m],e=g[b],c=typeof e,-1===(f=h.indexOf(b))?k(g,b)&&p&&j.queueUpdate(g,b,"new",null,g[b]):(g instanceof Array&&d(b)&&i[f]!==e&&(p&&j.queueUpdate(g,b,"updated",i[f],e),i[f]=e),o.splice(o.indexOf(b),1));if(p)for(n=o.length,m=0;n>m;m++)f=h.indexOf(o[m]),j.queueUpdate(g,o[m],"deleted",i[f]),h.splice(f,1),i.splice(f,1)},j.addListener=function(a){var c=b.indexOf(a);-1===c&&b.push(a)},j.removeListener=function(a){var c=b.indexOf(a);c>-1&&b.splice(c,1)},j.listeners=function(){return b},j.queueUpdate=function(a,b,c,d){this.queueUpdates([{type:c,object:a,name:b,oldValue:d}])},j.queueUpdates=function(a){var b,d=this,e=0,f=a.length||0;for(e=0;f>e;e++)b=a[e],c.push(b);g&&clearTimeout(g),g=setTimeout(function(){g=!1,d.deliverChangeRecords()},100)},j.deliverChangeRecords=function(){var a=0,d=b.length,e=!0;for(a=0;d>a&&e;a++)"function"==typeof b[a]&&(b[a]===console.log?console.log(c):e=!b[a](c));c=[]},j._checkPropertyListing(!0)},j=[],k=[];a.getNotifier=function(a){var b=k.indexOf(a),c=b>-1?j[b]:!1;return c||(b=k.length,k[b]=a,c=j[b]=new i(a)),c},a.observe=function(a,b){return new h(a,b)},a.unobserve=function(b,c){g(b,c),a.getNotifier(b).removeListener(c)}}(Object,this);