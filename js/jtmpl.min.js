/*! jtmpl 06-12-2013 */
!function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z;v=("undefined"!=typeof exports&&null!==exports?exports:this).jtmpl=function(b,c,g,h){var i,j,k,m;if((null===b||"string"==typeof b)&&null==c){if("undefined"==typeof document||null===document)throw new Error(":( this API is only available in a browser");return l.call(document.querySelectorAll(b))}if("string"!=typeof b||"number"!=(m=typeof c)&&"string"!==m&&"boolean"!==m&&"object"!==m||void 0!==g&&null!==g||(g=c,c=b,b=void 0),"string"==typeof b&&b.match(e)&&(b=document.getElementById(b.substring(1))),null==g)throw new Error(":( no model");return c.match&&c.match(e)&&(c=document.getElementById(c.substring(1)).innerHTML),h=h||{},h.delimiters=(h.delimiters||"{{ }}").split(" "),h.compiledDelimiters=(h.compiledDelimiters||"#{ }#").split(" "),h.defaultSection=h.defaultSectionTag||"div",h.defaultSectionItem=h.defaultSectionItem||"div",h.defaultVar=h.defaultVar||"span",h.defaultTargetTag=h.defaultTargetTag||"div",i=h.delimiters,c=(""+c).replace(z("{{{ ("+d+") }}}"),i[0]+"&$1"+i[1]).replace(z("<!-- "+f+" ({{ "+a+" }}) "+f+" -->",i),"$1").replace(z("("+d+")='({{ "+d+" }})'",i),"$1=$2").replace(z("("+d+')="({{ '+d+' }})"',i),"$1=$2").replace(z("\\n "+f+" ({{ "+a+" }}) "+f+" \\n",i),"\n$1\n"),j=v.compile(c,g,null,!1,h).trim(),b?("SCRIPT"===b.nodeName&&(k=document.createElement(h.defaultTargetTag),b.parentNode.replaceChild(k,b),b=k),b.innerHTML=j,h.rootModel=g):j},d="[\\w\\.\\-]+",e="^#[\\w\\.\\-]+$",a="[\\s\\S]*?",f="\\s*",c='(?: ( \\s* data-jt = " [^"]* )" )?',b=/^(#|\^)\s([\s\S]*)$/,v.preprocessingRules=[{pattern:"",replaceWith:""},{pattern:"",replaceWith:""},{pattern:"",replaceWith:""}],v.compileRules=[{pattern:'(class="? [\\w \\. \\- \\s {{}}]*) {{ ('+d+") }}$",replaceWith:function(a,b,c){var d;return d=c[b],[(-1===a.search("{")&&a||" ")+("boolean"==typeof d&&d&&b||""),[]]},echoReplaceWith:function(a,b){return a.search("{")>-1?" {{"+b+"}}":null},bindingToken:function(a,b){return"class="+b}},{pattern:"on("+d+") = {{ ("+d+") }}$",replaceWith:function(){return["",[]]},bindingToken:function(a,b){return"on"+a+"="+b}},{pattern:"("+d+") = {{ ("+d+") }}$",replaceWith:function(a,b,c){var d;return d=c[b],null==d||null===d?["",[]]:"boolean"==typeof d?[d?a:"",[]]:[""+a+'="'+d+'"',[]]},bindingToken:function(a,b){return""+a+"="+b}},{pattern:"{{ \\^ ("+d+") }}$",wrapper:"defaultSection",contents:function(a,b,c,d){var e;return e=b[c],Array.isArray(e)?[e.length?"":v(a,b),[["data-jt-0",x(a.trim(),d.delimiters,d.compiledDelimiters)]]]:[v(a,b),e?[["style","display:none"]]:[]]},bindingToken:function(a){return"^"+a}},{pattern:"{{ \\# ("+d+") }}$",wrapper:"defaultSection",contents:function(a,b,c,d){var e,f;return f=b[c],Array.isArray(f)?[function(){var b,c,d;for(d=[],b=0,c=f.length;c>b;b++)e=f[b],d.push(v(a,e,null,{asArrayItem:!0}));return d}().join(""),[["data-jt-1",x(a.trim(),d.delimiters,d.compiledDelimiters)]]]:"object"==typeof f?[v(a,f),[]]:[v(a,b),f?[]:[["style","display:none"]]]},bindingToken:function(a){return"#"+a}},{pattern:"{{ & ("+d+") }}$",wrapper:"defaultVar",replaceWith:function(a,b){return["."===a&&b||b[a],[]]},bindingToken:function(a){return a}},{pattern:"{{ ("+d+") }}$",wrapper:"defaultVar",replaceWith:function(a,b){return[q("."===a&&b||b[a]),[]]},bindingToken:function(a){return a}}],v.bindRules=[{pattern:"(value | checked | selected) = ("+d+")",react:function(a,b,c,d){return"OPTION"===a.nodeName&&a.parentNode.querySelector("option")===a&&a.parentNode.addEventListener("change",function(){var b,e,f,g,h,i;for(b=0,h=a.parentNode.children,i=[],f=0,g=h.length;g>f;f++)e=h[f],"OPTION"===e.nodeName?(d[c]=e.selected,i.push(b++)):i.push(void 0);return i}),"radio"===a.type&&a.name&&a.addEventListener("change",function(){var e,f,g,h;if(a[b])for(h=document.querySelectorAll("input[type=radio][name="+a.name+"]"),f=0,g=h.length;g>f;f++)e=h[f],e!==a&&e.dispatchEvent(new Event("change"));return d[c]=a[b]}),"text"===a.type?a.addEventListener("input",function(){return d[c]=a[b]}):a.addEventListener("change",function(){return d[c]=a[b]}),function(c){return a[b]!==c?a[b]=c:void 0}}},{pattern:"on("+d+") = ("+d+")",react:function(a,b,c,d,e){var f,g;if(f=(null!=e?null!=(g=e.rootModel)?g[c]:void 0:void 0)||d[c],"function"!=typeof f)throw":( "+c+" is not a function, cannot attach event handler";return a.addEventListener(b,f.bind(d)),null}},{pattern:"class = ("+d+")",react:function(a,b){return function(c){return(c&&addClass||removeClass)(a,b)}}},{pattern:"("+d+") = "+d,react:function(a,b){return function(c){return a[b]!==c?a[b]=c:void 0}}},{pattern:"(# | \\^) ("+d+")",recurse:!1,react:function(a,b,c,d,e){var f,g,h,i,j,k;if(h=d[c],Array.isArray(h)&&"#"===b)for(k=a.children,g=i=0,j=k.length;j>i;g=++i)f=k[g],v.bind(f,h[g],e);else"object"==typeof h&&v.bind(a,h,e);return function(c){var e,f,g,h;if(Array.isArray(c)){for(v.bindArrayToNodeChildren(c,a),a.innerHTML=c.length?"":v(a.getAttribute("data-jt-0")||"",{}),h=[],f=0,g=c.length;g>f;f++)e=c[f],h.push(a.appendChild(v.createSectionItem(a,e)));return h}return"object"==typeof c?(a.innerHTML=v(a.getAttribute("data-jt-1")||"",c),v(a,a.innerHTML,c,{rootModel:d})):a.style.display=!!c==("^"===b)&&"none"||""}}},{pattern:""+d,react:function(a){return function(b){return a.innerHTML=b}}}],v.compile=function(b,c,d,e,f){var g,h,i,j,k,l,m,n,o,p,q,r,x,y,A,B,C,D,E,F,G,H,I;for(C=z("{{ (/?) ("+a+") }}",f.delimiters),p="",n=0;B=C.exec(b);){if(B[1]){if(B[2]!==d)throw new Error(d&&":( expected {{/"+d+"}}, got {{"+B[2]+"}}"||":( unexpected {{/"+B[2]+"}}");return p+b.slice(n,C.lastIndex-B[0].length)}for(x=b.slice(Math.max(0,n-128),C.lastIndex),G=v.compileRules,E=0,F=G.length;F>E;E++)if(q=G[E],m=z(q.pattern,f.delimiters).exec(x)){p+=b.slice(n,C.lastIndex-m[0].length),j=w(p),g=q.bindingToken.apply(q,m.slice(1)),null!=q.replaceWith?(e?p+=("function"==typeof q.echoReplaceWith?q.echoReplaceWith.apply(q,m.slice(1)):void 0)||m[0]:(H=q.replaceWith.apply(q,m.slice(1).concat([c])),o=H[0],D=H[1],-1===j&&null!=q.wrapper?(y=f[q.wrapper],p+=s(t("<"+y+">"+o+"</"+y+">",g),D)):(p+=o,p=p.slice(0,j)+s(t(p.slice(j),g),D))),n=C.lastIndex):(A=v.compile(b.slice(C.lastIndex),c,m[1],!0,f),C.lastIndex+=A.length,h=C.exec(b),n=C.lastIndex,e?p+=B[0]+A+h[0]:(r=m[1],I=q.contents(A,c,r,f),i=I[0],D=I[1],-1===j?(y=f[q.wrapper],r!==l?(k=p.length,p+=s(t("<"+y+">"+i+"</"+y+">",g),D)):p=p.slice(0,k)+s(t(p.slice(k),g),D,i.trim())):(p=p.slice(0,j)+s(t(p.slice(j),g),D)+i.trim(),k=j),l=r));break}}return p+=b.slice(n),f.asArrayItem?u(p)?p:(y=f.defaultSectionItem,"<"+y+">"+p+"</"+y+">"):p},t=function(b,e){var g,h,i;return h=z("^ ("+f+" < "+d+") ("+a+") "+c).exec(b),g=(h[3]||"").length,i=h[1].length+h[2].length+g,b.slice(0,i)+(g?('data-jt="'===h[3].trim()?"":" ")+e:' data-jt="'+e+'"')+b.slice(i)},s=function(b,c,e){var g,h,i;return c.length?(g=z("^ ("+f+" < "+d+" "+a+")>").exec(b),i=g[1].length,b.slice(0,i)+[function(){var a,b,d;for(d=[],a=0,b=c.length;b>a;a++)h=c[a],d.push(" "+h[0]+'="'+h[1].replace(/"/g,"&quot;").replace(/>/g,"&gt;").replace(/</g,"&lt;")+'"');return d}()].join("")+">"+(e||"")+b.slice(i+1)):b},w=function(a){return a.trimRight().search(z("< "+d+" [^>]*? >?$"))},u=function(b){return!!b.trim().match(z("^<("+d+") "+f+"        [^>]*? > "+a+" </\\1>$ | < [^>]*? />$"))},v.bind=function(a,b,c){var d,e,f,g,h;for(d=function(a){var d,e,f,g,h,i,j,k,l,m;if(d=a.getAttribute("data-jt")){for(l=d.trim().split(" "),h=0,j=l.length;j>h;h++)for(e=l[h],m=v.bindRules,i=0,k=m.length;k>i;i++)if(g=m[i],f=z(g.pattern).exec(e))return y(b,g.attr,g.react.apply(g,[a].concat(f.slice(1),[b,c]))),null!=g.recurse&&g.recurse||!0;return!0}},d(a),h=a.children,f=0,g=h.length;g>f;f++)e=h[f],d(e)&&v.bind(e,b,c);return e},g=Array.prototype,l=g.slice,h=g.pop,i=g.push,j=g.reverse,k=g.shift,n=g.unshift,m=g.sort,r=function(a){return(a+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},z=function(a,b){return a=a.replace(/\s+/g,""),new RegExp(b?a.replace("{{",r(b[0])).replace("}}",r(b[1])):a,"g")},q=function(a){return(null!=a&&a||"").toString().replace(/[&"<>\\]/g,function(a){return{"&":"&amp;","\\":"\\\\",'"':'"',"<":"&lt;",">":"&gt;"}[a]})},x=function(a,b,c){var d,e,f,g;for(e=f=0,g=b.length;g>f;e=++f)d=b[e],a=a.replace(z(r(d)),c[e]);return a},v.createSectionItem=p=function(a,b){var c;return c=document.createElement("body"),c.innerHTML=v(a.getAttribute("data-jt-1")||"",b),c=c.children[0],v(c,c.innerHTML,b,{rootModel:model}),c},y=function(a,b,c){var d;if(a&&b&&c)return d=Object.getOwnPropertyDescriptor(a,b)||Object.getOwnPropertyDescriptor(a.constructor.prototype,b),Object.defineProperty(a,b,{get:d.get||function(){return d.value},set:function(a){return("function"==typeof d.set?d.set(a):void 0)||(d.value=a),c(a)},configurable:!0})},v.bindArrayToNodeChildren=o=function(a,b){var c,d,e,f,g;if(!a.__garbageCollectNodes)for(a.__garbageCollectNodes=function(){var a,b;for(a=this.__nodes.length,b=[];--a;)this.__nodes[a].parentNode?b.push(void 0):b.push(this.__nodes.splice(a,1));return b},a.__removeEmpty=function(){return this.length?void 0:b.innerHTML=""},a.__addEmpty=function(){return this.length?void 0:b.innerHTML=v(b.getAttribute("data-jt-0")||"",{})},a.pop=function(){var a,c,d;for(this.__removeEmpty(),this.__garbageCollectNodes(),d=this.__nodes,a=0,c=d.length;c>a;a++)b=d[a],b.removeChild(b.children[b.children.length-1]);return h.apply(this,arguments),h.apply(this.__values,arguments),this.__addEmpty()},a.push=function(a){var d,e,f,g,h;for(this.__removeEmpty(),this.__garbageCollectNodes(),h=this.__nodes,f=0,g=h.length;g>f;f++)b=h[f],b.appendChild(p(b,a));return i.apply(this,arguments),d=this.__values.length,e=i.apply(this.__values,arguments),c(a,d),e},a.reverse=function(){var a,d,e,f,g,h,i,k,l;for(this.__removeEmpty(),this.__garbageCollectNodes(),e=j.apply(this.__values,arguments),k=this.__nodes,f=0,h=k.length;h>f;f++)for(b=k[f],b.innerHTML="",l=this.__values,a=g=0,i=l.length;i>g;a=++g)d=l[a],b.appendChild(p(b,d)),c(d,a);return this.__addEmpty(),e},a.shift=function(){var a,d,e,f,g,h,i,j,l;for(this.__removeEmpty(),this.__garbageCollectNodes(),k.apply(this,arguments),e=k.apply(this.__values,arguments),j=this.__nodes,f=0,h=j.length;h>f;f++)b=j[f],b.removeChild(b.children[0]);for(l=this.__values,a=g=0,i=l.length;i>g;a=++g)d=l[a],c(d,a);return this.__addEmpty(),e},a.unshift=function(){var a,d,e,f,g,h,i,j,k,m,o,q;for(this.__removeEmpty(),this.__garbageCollectNodes(),m=l.call(arguments).reverse(),f=0,i=m.length;i>f;f++)for(d=m[f],o=this.__nodes,g=0,j=o.length;j>g;g++)b=o[g],b.insertBefore(p(b,d),b.children[0]);for(n.apply(this,arguments),e=n.apply(this.__values,arguments),q=this.__values,a=h=0,k=q.length;k>h;a=++h)d=q[a],c(d,a);return this.__addEmpty(),e},a.sort=function(){var d,e,f,g,h,i,j,k,l,n,o;for(this.__removeEmpty(),this.__garbageCollectNodes(),m.apply(this,arguments),f=m.apply(this.__values,arguments),n=this.__nodes,g=0,j=n.length;j>g;g++)for(b=n[g],b.innerHTML="",d=h=0,k=a.length;k>h;d=++h){for(e=a[d],o=this.__nodes,i=0,l=o.length;l>i;i++)b=o[i],b.appendChild(p(b,e));c(e,d)}return this.__addEmpty(),f},a.splice=function(a,d){var e,f,g,h,i,j,k,m,n;for(this.__removeEmpty(),this.__garbageCollectNodes(),m=this.__nodes,g=0,j=m.length;j>g;g++){for(b=m[g],e=h=0;d>=0?d>h:h>d;e=d>=0?++h:--h)b.removeChild(b.children[a]);for(n=l.call(arguments,2),i=0,k=n.length;k>i;i++)f=n[i],b.insertBefore(p(b,f),b.children[a]),c(f,a)}return apsplice.apply(this,arguments),apsplice.apply(this.__values,arguments),this.__addEmpty()},c=function(c,d){return a.__values[d]=c,Object.defineProperty(a,d,{get:function(){return this.__values[d]},set:function(a){var c,e,f,g;for(this.__garbageCollectNodes(),this.__values[d]=a,f=this.__nodes,g=[],c=0,e=f.length;e>c;c++)b=f[c],g.push(b.replaceChild(p(b,a),b.children[d]));return g}})},Object.defineProperty(a,"__nodes",{enumerable:!1,writable:!0,value:[]}),Object.defineProperty(a,"__values",{enumerable:!1,writable:!0,value:[]}),d=f=0,g=a.length;g>f;d=++f)e=a[d],c(e,d);return-1===a.__nodes.indexOf(b)&&a.__nodes.push(b),a}}.call(this);